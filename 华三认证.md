# 计算机网络概论

## 计算机网络的定义

定义：计算机网络是一组自治计算机互连的集合

## 计算机网络基本功能

资源共享

分布式处理与负载均衡

综合信息服务

## 计算机网络分类

LAN（局域网），由用户自行建设，使用私有地址组建的内部网络

MAN（城域网），由运营商或者大规模企业建设，连接城市范围的网络

WAN（广域网），由运营商建设，连接全国各个城域网的网络（骨干网、核心网、传输网）

广义广域网：局域网之外都是广域网

狭义广域网：LAN、MAN、WAN

## 网络拓扑

### 定义

网络设备连接排列方式

### 分类

总线型、环型、星型、树型、网状

### 总线型

所有设备共享同一条线路，线路中断导致所有设备中断通信

### 环型

所有设备共享一条环形总线，传输性能优于总线型拓扑

### 星型

其他节点都与中央节点直接相连，中央节点故障会导致全网中断

### 树形

（星型的进一步发散）优点：结构简单，组网成本低，维护任容易；缺点：中央节点压力大，可靠性差；

### 网状

节点之间有多条线路可达；任意线路故障并不影响网络传输，有线路备份，可靠性高；但是组网成本高，维护管理复杂

## 衡量计算机网络性能指标

### 带宽

单位时间内能够传输的数据总量（/bps比特每秒，1B字节=8b比特）

带宽越大，网络质量越好

### 延迟

数据从一个节点到达另一个节点消耗的时间

## 网络标准化组织

### 协议

数据通讯双方需要共同遵守的通讯规则

### 标准

公认的，所有厂商共同遵守的协议规则

### 标准化组织

ISO

IEEE

# OSI参考模型与TCP/IP模型

## OSI参考模型

### 背景

各厂商设备只支持自己的私有协议，跨厂商设备兼容性差，用户购买维护成本高，不利于网络技术发展

### 概念

定义了网络中设备所遵守的层次结构

### 优点

开放的标准化接口，协议不再封闭；多厂商设备兼容；易于理解、学习和更新协议标准；实现模块化工程，降低开发难度；便于故障排除

### 分层

应用层，为应用程序进程提供网络服务（和人交互）

表示层，定义数据的格式、结构；数据加密、压缩（把接受的二进制数据，转化为图片、视频等）

会话层，建立维护拆除应用程序间的会话，区分同一个应用程序的**不同访问者**

*传输层，数据分段、建立端到端的连接、维护传输可靠性；端口用于区分同一台计算机的**不同应用程序**；TCP：可靠的传输；UDP：不可靠的传输

*网络层，IP地址寻址、路由

*数据链路层，寻址，寻MAC地址

物理层，定义电压、接口、线缆标准、传输距离、传输介质等物理参数

### 缺陷

划分层次太多，会话层、表示层存在意义不大

IP协议成为事实的网络层唯一协议

## TCP/IP参考模型

在OSI参考模型基础上改动

![TCP/IP协议族的四个层次](https://img-blog.csdn.net/20180807151234488?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bjIwMTY0MjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

### 四层划分方法

1.网络接口层（物理层+数据链路层）， 相邻网络元素（主机、交换机、路由器等）的数据传输（以太网（Ethernet）、802.11（wifi）、PPP）

2.网络层， 负责源主机到目的主机的数据分组路由与转发（IP协议、路由协议等）

3.传输层，传输层对应于OSI参考模型的传输层，为应用层实体提供端到端的通信功能，保证了数据包的顺序传送及数据的完整性。该层定义了两个主要的协议：传输控制协议（TCP）和用户数据报协议（UDP).

4.应用层（会话层+表示层+应用层），应用层对应于OSI参考模型的高层，为用户提供所需要的各种服务，例如：FTP、Telnet、DNS、SMTP等.

### 五层划分方法（实际）

1.物理层，比特传输  

2.数据链路层，相邻网络元素（主机、交换机、路由器等）的数据传输（以太网（Ethernet）、802.11（wifi）、PPP）

3.网络层，负责源主机到目的主机的数据分组路由与转发（IP协议、路由协议等）

4.传输层，进程与进程间的数据传输（TCP，UDP等）

5.应用层（会话层+表示层+应用层），支持各种网络应用（如FTP，SMTP，HTTP等）

## 数据封装和解封装

### 定义

封装：在原始数据的基础上加入一些额外信息形成新的格式

解封装：拆除掉封装的额外信息，还原成原始数据

### TCP/IP分层封装

1.物理层：比特流

2.数据链路层：数据帧   加MAC地址

3.网络层：数据包  IP地址

4.传输层：数据段   加TCP协议

5.应用层：数据

### 数据封装和解封装过程

数据发送时，从上到下逐层封装（从应用层->物理层）

数据接收时，从下到上逐层解封装（从物理层->应用层）

只要拆除外层包装，才能看到内层封装

# 局域网基本原理

## 使用的协议及线缆

### 物理层

双绞线、同轴电缆、光纤、无线电

### 数据链路层

以太网，唯一事实标准

令牌环 （环形拓扑） 淘汰

FDDI 光纤（环形拓扑） 淘汰

### 网络层

IP 唯一事实标准

IPX 淘汰

Apple Talk 淘汰

## 局域网设备

冲突域:设备彼此收发数据会产生冲突的网络范围

### 集线器

工作在物理层

总线型拓扑，任意时间只能由一台主机占用总线，连接的所有设备位于同一冲突域，工作在物理层，没有寻址能力，所有设备泛洪式转发，不能做到定向转发

*淘汰*

### 交换机

工作在数据链路层

 内部两两相连，每两个接口有一条独立线路，每个接口都是独立的冲突域

基于MAC地址寻址，数据可单点转发

会有一张MAC地址表，记录了对应的接口连接设备的MAC地址

### CSMA/CD

带冲突检测的载波侦听多路访问

## 局域网线缆

### 双绞线

线型 直连线（异端直连，两端线序一致）交叉线（同类交叉，两端线序不一致）

双绞线两端连接的设备同一类，用交叉线；不同设备，用直连线

同类异类，看数据终端设备和数据中介设备（路由器和pc算同类设备）

线序 T568A 白绿，绿，白橙，蓝，白蓝，橙，白棕，棕

​		T568B 白橙，橙，白绿，蓝，白蓝，绿，白棕，棕

接口类型 rj45  rj11

一根双绞线最大传输距离100米

### 光纤

多模光纤，纤芯较粗，可传输多种光源，传输距离短，成本低

单模光纤，纤芯较细，只能传递单一光源，传输距离短，成本高

# 广域网基本原理

局域网的不足：以太网等局域网技术无法支持远程传输

## 广域网的接入方式

接入互联网

远程连接到分支机构（高速专线、VPN）

## 使用的协议及线缆

### 物理层

串行线缆

光纤 EPON

### 数据链路层

HDLC 淘汰

帧中继 淘汰

PPP 点到点协议，某些场景

以太网 可以使用EPON技术，在光纤中使用

### 网络层

IP 唯一事实标准

## 连接方式

### 电路交换

PSTN

ISDN

### 分组交换

帧中继

### ADSL

### EPON

#  IP协议的基本原理

## IP的主要作用

用唯一的IP地址标记每一个节点

用唯一的IP网络号标识每一个链路（一个网段）

确定节点所在的网络位置，进而确定节点所在位置

IP路由器选择适当的路径将IP包转发到目的地

根据链路的MTU对IP包进行分片和重组

为了通过实际的数据链路传递信息，须建立IP地址到数据链路层的地址映射

## IP网络结构

由多个网段构成，每个网段对应一个链路

路由器负责将网段连接起来，适配链路层协议，在网络之间转发数据包

## 交换机和路由器

交换机对接pc组成一个网段，路由器负责连接网段，适配**链路层**协议，在网络之间转发数据包

## IP头部封装格式

IP头部长度20-60字节

MTU：最大传输单元，接口收发数据支持的单个包的最大长度

​		   以太网接口默认MTU1500字节，PPPOE默认MTU1492字节

![img](https://img-blog.csdnimg.cn/84485478e6e1414ebfca1480e10b678c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6bij5r-R5bCP55m9,size_20,color_FFFFFF,t_70,g_se,x_16)

Destination address目的地址

Source address源地址



Version：4/6（IPV4/IPV6）

IHL：头部长度

Type of Service(TOS)：标记数据包优先级，于标志IP包期望获得的服务等级，常用于QoS(Quality of Service，服务质量）中

Total Length：总长度，包括数据部分



Identification：唯一地标识主机发送的每一个IP包，通常每发送一个包其值就会加1

Flags：标志位，取0/1，代表某个功能是否开启，有3个Flags，第一个保留；第二个标识数据包是否禁止分片；第三个标识是否为最后一个分片

Fragment Offset：片偏移，告诉正确的重组顺序，用于描述分片在数据包中的位置



Time to Live(TTL)：设置了数据包最大可以经过的路由器数目。一旦经过一个路由器，TTL值就会减1，当该字段值为0时，数据包将被丢弃。

Protocol：协议号，标识数据包内传送的数据所属的上层协议，IP用协议号区分上层协议。TCP协议的协议号为6，UDP协议的协议号为17

Header Checksum：头部校验序列，用于数据校验



Options：可选项

Padding：填充，封装完数据包，如果不是4字节倍数，通过Padding达到4字节的倍数

##  IP地址

### 定义

网络层地址

### 格式

32位长度，*点分十进制*，由网络位+主机位组成，网络长度和数字完全一致的地址属于同一网段

每段最大8个1；

### 分类

A类：1.x.x.x~126.x.x.x（前8位为网络位，后24位为主机位）

B类：128.x.x.x~191.x.x.x（前16位为网络位，后16位为主机位）

C类：192.x.x.x~223.x.x.x（前24位为网络位，后8位为主机位）

D类：224.x.x.x~239.x.x.x（组播地址，不可配置于主机地址）

E类：240.x.x.x~255.x.x.x（科研用，不对外公开）

IP地址分类为了划分不同的网络规模

### 特殊地址

127.x.x.x 本地环回地址，标识本机

主机位全0的地址：网络地址，标识某个网段

主机位全为1的地址：本网段的广播地址（192.168.1.255）（二进制全1）

255.255.255.255：全网广播地址，

0.0.0.0：任意IP地址，用来匹配任意IP地址 

### 公网/私网地址

公网地址：可以在互联网上寻址的地址，全球唯一，

私网地址：本地可以随意使用，无法在互联网上寻址；

​				  地址范围：A类：10.X.X.X

​									B类：172.16.X.X~172.31.X.X

​									C类：192.168.X.X

​									自动私有地址：169.254.X.X

​									运营商专用私有地址：100.64.X.X~100.127.X.X

## ARP协议

地址解析协议，将IP地址解析成MAC地址；

### 工作原理

A主机以广播形式发送ARP查询请求，询问B主机的IP对应的MAC地址

B主机以单播形式回复A主机本机的MAC地址

A主机把B主机的IP地址和MAC地址的映射关系写入ARP缓存表

`arp -a`：查询

`arp -d`：清除

## RARP协议

逆向地址解析协议（逆向ARP）

用于根据本机自己的MAC地址，查询本机自己的IP地址

## ICMP协议

可达性检测

`ping`：测试网络连通性

`tracert`：路由跟踪

H3C设备开启路由跟踪功能需要的前置命令：`ip ttl-expires enable`

​																		`ip unreachables enable`

## IP数据转发原理

如果目的IP和本机IP属于同一网段，会直接查询**目的IP**的MAC地址，并进行封装

如果目的IP和本机IP不属于同一网段，会查询**网关IP**地址的MAC地址，并进行封装

## 网关

本网段出口的IP地址。

如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据包转发给它自己的网关，再由网关转发给网络B的网关，网络B的网关再转发给网络B的某个主机

# TCP原理

## 传输层作用

提供面向连接或无连接服务

维护连接状态

对应用层数据进行分段和封装

实现多路复用（建立端到端连接，通过端口实现多路复用）

可靠地传输数据

执行流量控制

## TCP封装格式

端口：每个应用进出网络都需要经过一个唯一的端口，通过端口号识别数据交由哪个应用程序来处理（多路复用）

​	服务端：固定端口号

​	客户端：1024以上随机端口

Telnet :23	FTP :20/21	HTTP :80	SMTP :25	DNS :53	TFTP :69



![TCP封装格式](https://img-blog.csdnimg.cn/72adc4fe4f0a49198637ac66af4ba384.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6bij5r-R5bCP55m9,size_20,color_FFFFFF,t_70,g_se,x_16)

![TCP封装格式](https://img-blog.csdn.net/20170501223823511)

Source Port 源端口

Destination Port 目的端口

Sequence number 序列号，等于上一步ack的值

Acknowledgement Number 确认号，用来确认确实有收到相关封包，内容表示期望收到下一个报文的序列号，用来解决丢包的问题，等于上一次seq+length。

Data Offset 数据偏移量

Reserved 保留位，无功能

Flag 标志位

1. URG：紧急指针有效位。标志有没有。它和第五行的紧急指针配合使用。当URG=1时，TCP根据16位紧急指针确定紧急数据的最后一个字节的位置。
2. ACK：确认位。当ACK=1时，确认序列号字段有效
3. PSH：把缓存池所有数据上传，紧急处理
4. RST：强行结束TCP连接，立即结束连接
5. SYN：SYN是同步的缩写，SYN 段是发送到另一台计算机的 TCP 数据包，请求在它们之间建立连接
6. FIN：断开TCP连接，通过四次挥手断开连接

Urgent Pointer  16位紧急指针位,标识紧急位在哪

Window 目的主机使用16位的窗口字段告诉源主机它期望每次收到的数据的字节数。窗口字段是一个16位字段（流量控制）

Checksum 校验序列，TCP头包括16位的校验和字段用于错误检查。源主机基于部分IP头信息、TCP头和数据内容计算一个校验和，目的主机也要进行相同的计算，如果收到的内容没有错误过，两个计算结果应该完全一样，从而证明数据的有效性

Padding 这个字段中加入额外的零，以保证TCP头是32位的整数倍。

### 确认重传机制

*TCP的报文到达确认（ACK），是对接收到的数据的最高序列号的确认，并向发送端返回一个下次接收时期望的TCP数据包的序列号（Ack Number）。例如， 主机A发送的当前数据序号是400，数据长度是100，则接收端收到后会返回一个确认号是501的确认号给主机A。*

*TCP提供的确认机制，可以在通信过程中可以不对每一个TCP数据包发出单独的确认包（Delayed ACK机制），而是在传送数据时，顺便把确认信息传出， 这样可以大大提高网络的利用率和传输效率。同时，TCP的确认机制，也可以一次确认多个数据报，例如，接收方收到了201，301，401的数据报，则只 需要对401的数据包进行确认即可，对401的数据包的确认也意味着401之前的所有数据包都已经确认，这样也可以提高系统的效率。*

*若发送方在规定时间内没有收到接收方的确认信息，就要将未被确认的数据包重新发送。接收方如果收到一个有差错的报文，则丢弃此报文，并不向发送方 发送确认信息。因此，TCP报文的重传机制是由设置的超时定时器来决定的，在定时的时间内没有收到确认信息，则进行重传。这个定时的时间值的设定非 常重要，太大会使包重传的延时比较大，太小则可能没有来得及收到对方的确认包发送方就再次重传，会使网络陷入无休止的重传过程中。接收方如果收到 了重复的报文，将会丢弃重复的报文，但是必须发回确认信息，否则对方会再次发送。*





## 三次握手

TCP通讯开始，建立可靠的连接

![TCP三次握手](https://img-blog.csdn.net/20180808105159546?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2p1bjIwMTY0MjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

### 第一次握手

客户端给服务器发送一个SYN段(在 TCP 标头中 SYN 位字段为 **1** 的 TCP/IP 数据包), 该段中也包含客户端的初始序列号(Sequence number = J)。

Client会进入SYN_SENT状态，并发送Syn 消息给Server端，**SYN标志位在此场景下被设置为1**（代表是一个握手请求），同时会带上Client这端分配好的Seq号，这个序列号是一个U32的整型数，该数值的分配是根据时间产生的一个随机值，通常情况下每间隔4ms会加1。除此之外还会带一个MSS，也就是最大报文段长度，表示TCP传往另一端的最大数据块的长度。

### 第二次握手

服务器返回客户端 SYN 和ACK 段(在 TCP 标头中SYN和ACK位字段都为 1 的 TCP/IP 数据包)， 该段中包含服务器的初始序列号(Sequence number = K)；同时使 Acknowledgment number = J + 1来表示确认已收到客户端的 SYN段(Sequence number = J)。

Server端在收到，Syn消息之后，会进入SYN_RCVD状态，同时返回Ack消息给Client，用来通知Client，Server端已经收到SYN消息并通过了确认。这一步Server端包含两部分内容，一部分是回复Client的Syn消息，其中**ACK=1**，Seq号设置为Client的Syn消息的Seq数值+1；另一部分是主动发送Sever端的Syn消息给Client，Seq号码是Server端上面对应的序列号，当然**Syn标志位也会设置成1**，MSS表示的是Server这一端的最大数据块长度。

###  第三次握手

客户端给服务器响应一个ACK段(在 TCP 标头中 ACK 位字段为 **1** 的 TCP/IP 数据包), 该段中使 Acknowledgment number = K + 1来表示确认已收到服务器的 SYN段(Sequence number = K)。

Client在收到第二步消息之后，首先会将Client端的状态从SYN_SENT变换成ESTABLISHED,此时Client发消息给Server端，这个方向的通道已经建立成功，Client可以发送消息给Server端了，Server端也可以成功收到这些消息。其次，Client端需要回复ACK消息给Server端，消息包含ACK状态被设置为1，Seq号码被设置成Server端的序列号+1。（备注：这一步往往会与Client主动发起的数据消息，合并到一起发送给Server端。）

三次握手能达到双方互相确认



## 四次挥手

![四次挥手](https://img-blog.csdnimg.cn/bb1d376499c24e7f8d6b451893b0a473.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA4oCNb09vT29Pb29PTw==,size_20,color_FFFFFF,t_70,g_se,x_16)

1.FIN=1，从A发送B

2.ACK=1，从B发送A

3.FIN=1，从B发送A

4.ACK=1，从A发送B

### 第一次挥手

客户端打算断开连接，向服务器发送FIN报文(FIN标记位被设置为1，1表示为FIN，0表示不是)，FIN报文中会指定一个序列号，之后客户端进入FIN_WAIT_1状态。

也就是客户端发出连接释放报文段(FIN报文)，指定序列号seq = u，主动关闭TCP连接，等待服务器的确认。

### 第二次挥手

服务器收到连接释放报文段(FIN报文)后，就向客户端发送ACK应答报文，以客户端的FIN报文的序列号 seq+1 作为ACK应答报文段的确认序列号ack = seq+1 = u + 1。

接着服务器进入CLOSE_WAIT(等待关闭)状态，此时的TCP处于半关闭状态(下面会说什么是半关闭状态)，客户端到服务器的连接释放。客户端收到来自服务器的ACK应答报文段后，进入FIN_WAIT_2状态。

### 第三次握手

服务器也打算断开连接，向客户端发送连接释放(FIN)报文段，之后服务器进入LASK_ACK(最后确认)状态，等待客户端的确认。

服务器的连接释放(FIN)报文段的FIN=1，ACK=1，序列号seq=m，确认序列号ack=u+1。

### 第四次握手

客户端收到来自服务器的连接释放(FIN)报文段后，会向服务器发送一个ACK应答报文段，以连接释放(FIN)报文段的确认序号 ack 作为ACK应答报文段的序列号 seq，以连接释放(FIN)报文段的序列号 seq+1作为确认序号ack。



*之后客户端进入TIME_WAIT(时间等待)状态，服务器收到ACK应答报文段后，服务器就进入CLOSE(关闭)状态，到此服务器的连接已经完成关闭。*

*客户端处于TIME_WAIT状态时，此时的TCP还未释放掉，需要等待2MSL后，客户端才进入CLOSE状态。*



### 为什么挥手需要四次？

*这是由于TCP的半关闭(half-close)造成的。半关闭是指：TCP提供了连接的一方在结束它的发送后还能接受来自另一端数据的能力。通俗来说，就是不能发送数据，但是还可以接受数据。*

*TCP不允许连接处于半打开状态时，就单向传输数据，因此完成三次握手后才可以传输数据(第三握手可以携带数据)。*

*当连接处于半关闭状态时，TCP是允许单向传输数据的，也就是说服务器此时仍然可以向客户端发送数据，等服务器不再发送数据时，才会发送FIN报文段，同意现在关闭连接。*

*这一特性是由于TCP双向通道互相独立所导致的，也使得关闭连接必须经过四次握手。*

### 为什么中间的ACK和FIN不可以像三次握手那样合为一个报文段？

*在socket网络编程中，执行close()方法会触发内核发送FIN报文。什么时候调用close()方法，这是由用户态决定的，假如服务器仍有大量数据等待处理，那么服务器会等数据处理完后，才调用close()方法，这个时间可能会很久，而ACK报文则是由系统内核来完成的，这个过程会很快。所以中间的ACK和FIN不能合为一个包。*

## TCP的特征

### 优点

传输可靠性高

### 缺点

占用带宽高，传输延迟高

## TCP适用场景

对数据完整性要求高，但是对传输延迟要求低

# UDP封装格式

优点：占用带宽低，传输延迟低

缺点：没有任何可靠机制

适用场景：对传输延迟要求高，但对数据完整性要求低

## 封装格式

每个 UDP 报文分为 UDP 报头和 UDP 数据区两部分。报头由 4 个 16 位长（2 字节）字段组成，分别说明该报文的源端口、目的端口、报文长度和校验值。

![img](http://c.biancheng.net/uploads/allimg/191111/6-1911111249535K.gif)

#### 源端口

这个字段占据 UDP 报文头的前 16 位，通常包含发送数据报的应用程序所使用的 UDP 端口。接收端的应用程序利用这个字段的值作为发送响应的目的地址。这个字段是可选的，所以发送端的应用程序不一定会把自己的端口号写入该字段中。如果不写入端口号，则把这个字段设置为 0。这样，接收端的应用程序就不能发送响应了。

### 目的端口

接收端计算机上 UDP 软件使用的端口，占据 16 位。

### 长度

该字段占据 16 位，表示 UDP 数据报长度，包含 UDP 报文头和 UDP 数据长度。因为 UDP 报文头长度是 8 个字节，所以这个值最小为 8。

### 校验值

该字段占据 16 位，可以检验数据在传输过程中是否被损坏。



# 路由器、交换机及其操作系统介绍

## 路由器与交换机的作用与特点

### 路由器

功能：连接具有不同介质的链路；连接网络或子网，**隔离广播**；对数据报文执行寻路和转发；交换和维护路由信息；

特点：主要工作在物理层、数据链路层和网络层；根据网络层信息进行路由转发；提供丰富的链路层协议和接口协议；支持多种路由协议；

### 交换机

功能：连接多个以太网物理段，隔离冲突域；对以太网帧进行高速而透明的交换转发；自行学习和维护MAC地址信息

特点：主要工作在物理层、数据链路层；提供以太网间的透明桥接和交换；依据链路层MAC地址，将以太网帧在端口间进行转发

### 发展趋势

路由和交换的融合

三层交换机：具有路由功能的交换机

多业务功能的融合

自定义功能

## Comware

设备运行的网络操作系统，对硬件驱动和底层操作系统进行屏蔽和封装

# 命令行操作基础

##  配置设备的方法

通过console口本地访问

通过AUX口远程访问

通过Telnet终端访问

通过SSH终端访问

通过异步串口访问

## 使用console口进行连接

适用于设备初次调试

使用CRT软件进行连接

协议选择serial

port选择连接的端口

baud rate 选择9600

flow不勾选

## 通过Telnet远程访问

适用于设备上架后进行维护管理

`telnet server enable` 	启用telnet

`local-user [name] class manage `	创建用户

`password simple 123456` 	密码

`service-type telnet` 	告诉系统该用户是干嘛的

` authorization-attribute user-role level-15` 	配置用户权限级别

`user-interface vty 0 4`(最多5个用户同时连接)

`authentication-mode ?` 指定验证模式（scheme，用户名加密码）

## 命令行视图

### 用户视图

<H3C>

只能查看配置，不能修改配置

### 系统视图

system-view（进入系统视图）

[H3C]

可以查看和修改全局配置

### 接口视图

interface g0/0（进入g0/0接口模式）

[H3C-GigabitEthernet0/0]

可以对接口修改配置

## 视图切换

`system-view`（用户视图进入系统视图）

`line`用户线试图

`router`

`interface g0/0`（系统视图进入g0/0接口视图）

`quit` 返回上一级视图

`return`  直接返回到用户视图

## 常用查看命令

`display current-configuration` 查看当前所有配置

`display ip interface brief` 查看所有三层接口的摘要信息，接口的ip地址，接口联通状态

`display interface g0/0` 查看接口详细信息

`display version `  查看设备信息

`display this` 查看当前视图下配置了哪些参数

## 设备操作命令

`sysname` 更改设备名称（系统视图）

`reboot` 重启（用户视图）

`save` 保存当前配置（系统视图）

`reset saved-configuration` 恢复出厂设置（用户视图）

`undo` 在命令前加undo表示执行该命令的反向操作，撤销命令

`shutdown ` 手动关闭接口（接口视图）

`undo shutdown ` 手动开启接口

## 命令行帮助

命令可以简写

Tab键自动补全

？键命令提示



# 网络设备的文件管理

## 设备存储器

ROM：只读存储器，存储Bootrom程序，在Bootrom模式下可以破解密码

RAM：内存，断电丢失数据

Flash：闪存，永久存储操作系统文件、配置文件等数据

## 设备配置文件

当前配置：`current-configuration` 设备当前正在运行和生效的配置信息，存储在RAM中

起始配置：`startup-configurayion` 每次设备开启会自动加载的配置信息，存储在Flash中

起始文件的备份：

`ftp server enable`启用ftp服务器

`startup saved-configuration startup.cfg` 开机自动调用文件startup.cfg

